<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galeri - PMII</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .galeri-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* Maksimal 4 kolom */
    gap: 15px;
    }

    .galeri-item {
      position: relative;
      overflow: hidden;
      border-radius: 8px;
    }

    .galeri-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
      border-radius: 8px;
    }

    .galeri-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.4);
      color: white;
      padding: 5px 10px;
      font-size: 14px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .galeri-caption button {
      background: red;
      border: none;
      color: white;
      padding: 2px 6px;
      font-size: 12px;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <div class="header">
    <div></div> <!-- dikosongkan untuk space -->
    <div class="logo-kanan">
        <div class="bulat-kuning"></div>
        <span href="index.html">PMII Makassar</span>
        <button class="logout-header-button" id="logout-btn" onclick="logoutUser()" style="display: none;">Logout</button>
    </div>
  </div>

  <button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>

  <div class="sidebar-dots">
    <div class="sidebar-dot" id="dot-beranda"></div>
    <div class="sidebar-dot" id="dot-tentang"></div>
    <div class="sidebar-dot" id="dot-kaderisasi"></div>
    <div class="sidebar-dot" id="dot-persuratan"></div>
    <div class="sidebar-dot" id="dot-berita"></div>
    <div class="sidebar-dot" id="dot-galeri"></div>
    <div class="sidebar-dot" id="dot-anggota"></div>
    <div class="sidebar-dot" id="dot-ruang-diskusi" style="display: none;"></div>
    <div class="sidebar-dot" id="dot-login-user"></div>
    <div class="sidebar-dot" id="dot-login-admin"></div>
    <div id="sidebar-dot" class="sidebar-dot" style="display: none;"></div>
  </div>

  <div class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-item">Beranda</a>
    <a href="#" class="sidebar-item" id="menu-tentang">Tentang PMII</a>
    <a href="#" class="sidebar-item" id="menu-kaderisasi">Kaderisasi</a>
    <a href="persuratan.html" class="sidebar-item" id="menu-persuratan">Persuratan</a>
    <a href="berita.html" class="sidebar-item">Berita</a>
    <a href="#" class="sidebar-item" id="menu-galeri">Galeri</a>
    <a href="#" class="sidebar-item" id="menu-anggota">Anggota</a>
    <a href="#" class="sidebar-item" id="menu-ruang-diskusi">Ruang Diskusi</a>
    <a href="login.html" class="sidebar-item" id="menu-login-user">Login User</a>
    <a href="admin_login.html" class="sidebar-item" id="menu-login-admin">Login Admin</a>
    <a href="admin_panel.html" class="sidebar-item" id="menu-admin-panel" style="display: none;">Admin Panel</a>
  </div>

  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <!-- MAIN -->
  <div class="main-content">
    <div class="welcome-section">
      <h1 class="welcome-title">Galeri Foto Kegiatan</h1>

      <form id="galeriForm" style="display: none; margin-bottom: 30px;">
        <input type="text" id="namaFoto" placeholder="Nama Foto"
          style="margin-bottom:10px;padding:10px;width:100%;border:1px solid #ccc;border-radius:6px;" />
        <div style="display:flex;gap:10px;align-items:center;">
          <input type="file" id="fotoInput" accept="image/*" style="display:none;" />
          <label for="fotoInput"
            style="padding:10px 20px;background:#2563eb;color:white;border-radius:6px;font-weight:bold;cursor:pointer;">üì∑ Pilih Foto</label>
          <button type="submit" class="logout-header-button"
            style="padding:10px 20px;">Upload</button>
          <span id="fileFotoName" style="font-size: 14px; font-style: italic;">Belum ada foto</span>
        </div>
      </form>

      <div class="galeri-grid" id="galeriGrid"></div>
    </div>
  </div>
  <script src="script.js"></script>
  <script>

    document.addEventListener('DOMContentLoaded', () => {
      const isAdmin = localStorage.getItem('isAdmin') === 'true';
      const form = document.getElementById('galeriForm');
      const namaInput = document.getElementById('namaFoto');
      const fileInput = document.getElementById('fotoInput');
      const fileName = document.getElementById('fileFotoName');
      const grid = document.getElementById('galeriGrid');

      if (isAdmin) form.style.display = 'block';

      fileInput.addEventListener('change', () => {
        fileName.textContent = fileInput.files[0]?.name || 'Belum ada foto';
      });

      form.addEventListener('submit', e => {
        e.preventDefault();
        const nama = namaInput.value.trim();
        const file = fileInput.files[0];
        if (!nama || !file) return alert('Isi nama & pilih foto');

        const reader = new FileReader();
        reader.onload = () => {
          const list = JSON.parse(localStorage.getItem('galeriList') || '[]');
          list.unshift({ id: Date.now(), nama, dataUrl: reader.result });
          localStorage.setItem('galeriList', JSON.stringify(list));
          namaInput.value = '';
          fileInput.value = '';
          fileName.textContent = 'Belum ada foto';
          renderGaleri();
        };
        reader.readAsDataURL(file);
      });

      window.hapusFoto = id => {
        if (!confirm('Hapus foto ini?')) return;
        const list = JSON.parse(localStorage.getItem('galeriList') || '[]');
        const updated = list.filter(f => f.id !== id);
        localStorage.setItem('galeriList', JSON.stringify(updated));
        renderGaleri();
      };

      function renderGaleri() {
        const list = JSON.parse(localStorage.getItem('galeriList') || '[]');
        grid.innerHTML = '';
        list.forEach(f => {
          const item = document.createElement('div');
          item.className = 'galeri-item';
          item.innerHTML = `
            <img src="${f.dataUrl}" alt="${f.nama}" />
            <div class="galeri-caption">
              <span>${f.nama}</span>
              ${isAdmin ? `<button onclick="hapusFoto(${f.id})">üóëÔ∏è</button>` : ''}
            </div>
          `;
          grid.appendChild(item);
        });
      }

      renderGaleri();
    });
  </script>
</body>
</html>
